window.HTMLElement.prototype.importCustomElementTemplateFromHTMLImport=function(){this.innerHTML=document.querySelector('link[href*="'+this.tagName.toLowerCase()+'.html"]').import.querySelector("template").innerHTML};{const t=require?require("fs"):null,e=require?require("url").URL:null;window.HTMLScriptElement.prototype.loadSameNameHTML=function(n){let o=document.currentScript.src.substr(0,document.currentScript.src.lastIndexOf("."))+".html";if(t){let o=new e(decodeURI(o));t.readFile(o,function(t,e){if(t)throw t;n(e)})}else fetch(o).then(function(t){t.text().then(function(t){n(t)},function(t){throw t})},function(t){throw t})}}if(HTMLTemplateElement.prototype.getFirstElementChild=function(){let t=document.createElement("div");return t.innerHTML=this.innerHTML,t.firstElementChild},window.location.staticAssign=function(t){window.history.pushState(null,null,t),window.dispatchEvent(new Event("popstate"))},window.location.getPathLastSegment=function(){window.location.path;return window.location.pathname.split("/").pop()},window.location.getParam=function(t){let e={},n=window.location.search.substr(1).split("&");for(let t=0;t<n.length;t++){let o=n[t].split("=");e[o[0]]=o[1]}return e[t]||""},window.Math.randomRange=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},window.Number.prototype.toRad=function(){return this*Math.PI/180},window.Math.calculateDistance=function(t,e,n,o){let a=(n-t).toRad(),r=(o-e).toRad(),i=Math.sin(a/2)*Math.sin(a/2)+Math.cos(t.toRad())*Math.cos(n.toRad())*Math.sin(r/2)*Math.sin(r/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},window.avalon={},window.avalon.api={},window.avalon.api.targetUrl="",window.avalon.api.processResultByContentType=async function(t){if(200!==t.status)throw window.avalon.error.trigger("Avalon Front End Infrastructure API",t.statusText),new Error(t.statusText);switch(t.headers.get("Content-Type")){case"application/json":return await t.json();case"multipart/form-data":return await t.formData();case"text/plain":case"text/html":return await t.text();default:return await t.blob()}},window.avalon.api.get=async function(t,e){const n=window.avalon.auth;let o=Object.keys(e).map(t=>t+"="+e[t]).join("&"),a=new Headers;a.append("Content-Type","text/plain"),a.append("Authorization",n.get());let r={method:"GET",mode:"cors",headers:a},i=await fetch(window.avalon.api.targetUrl+t+"?"+o,r);return window.avalon.api.processResultByContentType(i)},window.avalon.api.put=async function(t,e){const n=window.avalon.auth;let o=new Headers;switch(!0){case e instanceof window.File:o.set("Content-Type",e.type);break;case"object"==typeof e:o.set("Content-Type","application/json"),e=JSON.stringify(e);break;case"string"==typeof e:o.set("Content-Type","text/plain")}o.append("Authorization",n.get());let a={method:"PUT",mode:"cors",headers:o,body:e},r=await fetch(window.avalon.api.targetUrl+t,a);return window.avalon.api.processResultByContentType(r)},window.avalon.api.delete=async function(t,e){const n=window.avalon.auth;let o=new Headers;o.append("Content-Type","application/json"),o.append("Authorization",n.get());let a={method:"DELETE",mode:"cors",headers:o,body:JSON.stringify(e)},r=await fetch(window.avalon.api.targetUrl+t,a);return window.avalon.api.processResultByContentType(r)},document.head.querySelector('meta[name="avalon-front-end-infrastructure-api-url"]')){let t=document.head.querySelector('meta[name="avalon-front-end-infrastructure-api-url"]').content.split(",");for(let e of t){let t=new window.URL(e);window.location.hostname===t.hostname&&(window.avalon.api.targetUrl=e)}window.avalon.api.targetUrl||(window.avalon.api.targetUrl=t[0])}window.avalon.auth={};{let t=null;window.avalon.auth.set=function(e){t=e},window.avalon.auth.get=function(){return t}}window.avalon.error={},window.avalon.error.e=new Set,window.avalon.error.register=function(t){window.avalon.error.e.add(t)},window.avalon.error.unregister=function(t){window.avalon.error.e.delete(t)},window.avalon.error.trigger=function(t,e){for(let n of window.avalon.error.e)n.dispatchEvent(new CustomEvent("ERROR",{detail:{source:t,text:e}}))},window.avalon.util={},window.avalon.util.sleep=function(t){return new Promise(e=>setTimeout(e,t))};